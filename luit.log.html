<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!--
 *****************************************************************************
 * Copyright 2006-2010,2011 by Thomas E. Dickey                              *
 * All Rights Reserved.                                                      *
 *                                                                           *
 * Permission to use, copy, modify, and distribute this software and its     *
 * documentation for any purpose and without fee is hereby granted, provided *
 * that the above copyright notice appear in all copies and that both that   *
 * copyright notice and this permission notice appear in supporting          *
 * documentation, and that the name of the above listed copyright holder(s)  *
 * not be used in advertising or publicity pertaining to distribution of the *
 * software without specific, written prior permission.                      *
 *                                                                           *
 * THE ABOVE LISTED COPYRIGHT HOLDER(S) DISCLAIM ALL WARRANTIES WITH REGARD  *
 * TO THIS SOFTWARE, INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND *
 * FITNESS, IN NO EVENT SHALL THE ABOVE LISTED COPYRIGHT HOLDER(S) BE LIABLE *
 * FOR ANY SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES         *
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN     *
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF   *
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.            *
 *****************************************************************************
  $XTermId: luit.log.html,v 1.79 2011/10/30 14:41:39 tom Exp $
  -->
<HTML>
<HEAD>
<TITLE>LUIT - Change Log</TITLE>
<LINK REV=MADE HREF="mailto:dickey@invisible-island.net">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</HEAD>
<BODY>
<HR>
Copyright 2006-2010,2011 by <A
HREF="mailto:dickey@invisible-island.net">Thomas E. Dickey</A>
<HR>
<H1>Contents</H1>
This file contains a list of the changes that I have made for luit.
<p>
<a id="t20111030">2011/10/30</a> -
<ul>
<li>modify configure script to add <code>X_LIBS</code> symbol after
resolving fontenc library, to use the associated <code>-L</code> option
in subsequent configure-checks.
<li>add <code>-t</code> to simplify testing available locales versus
luit's tables and the <code>locale.alias</code> file.
<li>add "US-ASCII" for C/POSIX to the locale-charset table.
<li>add entries to the locale-charset table to correspond with
the font-encoding table, making it possible to
use locales defined with each named charset
(reported by Andrey Ivanov,
also reported in Freedesktop #41857).
<li>modify the lookup by locale charset to help match results from
<code>nl_langinfo(CODESET)</code> by mapping commonly used prefixes
into the prefixes used by luit.
<li>check for, and use <code>nl_langinfo(CODESET)</code> to augment
X's <code>locale.aliases</code> file for determining the encoding to use.
<li>workaround limitation in
copying terminal settings on Solaris from original tty to pty.
<li>add /usr/openwin/lib/locale to search-list of locale.alias for Solaris 10.
<li>improve configure script so that it does not error-out if fontenc is
unavailable, using iconv instead.
<li>bump version to 1.2, noting xorg hackers having marked 
(with only cosmetic changes) the <a href="#t20100601">2010/6/1</a>
snapshot as "1.1.0".
<li>add/use configure check for <code>posix_openpt</code>,
prompted by FreeBSD ports/161480.
<li>updated configure script macros:
CF_ANSI_CC_CHECK
CF_DISABLE_RPATH_HACK
CF_LD_RPATH_OPT
CF_PKG_CONFIG
CF_RPATH_HACK
CF_SVR4
CF_WITH_ZLIB
CF_XOPEN_SOURCE
<li>update config.guess, config.sub
</ul>
<a id="t20101128">2010/11/28</a> -
<ul>
<li>use <code>plink.sh</code> script from xterm to reduce unneeded library
dependencies, e.g., from fontenc's buggy package script.
<li>eliminate quoted- and duplicate-includes.
<li>make <code>-g0</code> and similar options actually work,
by adding checks in <code>initIso2022</code>.
<li>add messages for the repeated <code>-v</code> option, to
show which parts of the font-encoding configuration fail,
for troubleshooting.
<li>add configure option <code>--disable-leaks</code>, etc.
<li>add configure option <code>--enable-trace</code>.
<li>add configure option <code>--enable-iconv</code>, to use GNU iconv,
which is far more portable than fontenc.
<ul>
<li>Initially, this supports single-byte encodings such as ISO-8859-x.
<li>DEC special and technical character sets are supported via custom tables.
</ul>
<li>use static variables and functions consistently, where external linkage
is not required.
<li>updated configure script macros, e.g., to deprecate shell syntax
no longer supported by bash.
<li>modify manpage to use "misc" category for the miscellaneous Linux manpages
cited in the "SEE ALSO" section,
prompted by xorg change for 1.1.0 version.
<p>
Aside from that (and some cosmetic changes to C source,
as well as providing a different configure script), 
and omitting this change-log,
the xorg 1.1.0 is the same as the <a href="#t20100601">2010/6/1 version</a>.
Its release notes
<a href="http://www.mail-archive.com/xorg-announce@lists.freedesktop.org/msg01206.html">state</a>:
<blockquote>
This release includes these changes from Thomas Dickey's luit-20100601:
<ul>
<li>add -alias option to allow override of locale.alias pathname.
<li>improve fix waitForInput as suggested in Freedesktop #26383.
<li>fix warnings from clang --analyze
</ul>
</blockquote>
</ul>
<p>
<a id="t20100605">2010/6/5</a> -
<ul>
<li>fix a typo in ifdef for <code>&lt;sys/param.h&gt;</code> which
made setuid feature not work properly for FreeBSD.
<li>improve configure check for <code>locale.alias</code> file for OpenSolaris.
<li>add configure option <code>--disable-rpath-hack</code>,
modified configure script to normally supply an rpath option
if possible to simplify linkage to libraries in unusual places.
</ul>
<p>
<a id="t20100601">2010/6/1</a> -
<ul>
<li>add makefile rules for generating pdf, etc., for manpage.
<li>modify <code>minstall.sh</code> to update program name if the configure
script options such as <code>--program-prefix</code>
were used to rename the program.
<li>add Debian package scripts (requires some assembly...).
<li>add rpm spec-file
(see <a href="ftp://invisible-island.net/RPMS">my ftp area</a> for binaries).
<li>add <code>-alias</code> option to allow override of
<code>locale.alias</code> pathname.
<li>improve configure check for <code>locale.alias</code> file for NetBSD.
<li>improve fix <code>waitForInput</code> as suggested in Freedesktop #26383.
<li>drop <code>mkdirs.sh</code>, use <code>mkdir&nbsp;-p</code>.
<li>improve configure script for ctags/etags, e.g., to work with pkgsrc. 
<li>drop <code>Imakefile</code>
<li>fix warnings from <code>clang --analyze</code>
<li>updated configure script macros, mostly for quoting- and variable
initialization fixes.
<li>update config.guess, config.sub
</ul>
<p>
<a id="t20091014">2009/10/14</a> -
<ul>
<li>add <code>-V</code> version option.
<li>work around defective implementation of gcc attribute warn_unused_return.
<li>add configure check for <code>openpty</code>, use that on systems such
as OpenBSD rather than requiring setuid operation.
<li>ifdef <code>open</code> to work with incomplete
definitions for <code>O_NOCTTY</code> and <code>TIOCSCTTY</code>
(adapted from patch by Yaakov Selkowitz).
</ul>
<p>
<a id="t20090816">2009/8/16</a> -
<ul>
<li>reset connection to blocking mode on exit.
<li>modify <code>poll</code>-flavor of <code>waitForInput</code> to also
check if the connection has hung up.
<li>improve initialization for <code>-p</code> command-line option to
work with more BSD-flavors.
<li>improve configure script checks for font encoding library using AC_PATH_XTRA,
and noting that font encoding library may depend upon z library.
<li>replace #ifdef to define <code>HAVE_GRANTPT</code> with configure script.
<li>improve use of <code>const</code> more consistently in sources.
<li>clean up include-dependencies by including config.h before other includes.
<li>add change from xorg git:
<ul>
<li>luit: Convert platform #ifdefs to configure tests for functions &amp; headers
<br>
(adds configure checks for functions and headers used to open pty's,
uses that to replace a derived #define for <code>HAVE_POLL</code>,
#ifdef's the corresponding headers and
modifies #ifdef for <code>I_PUSH</code> ioctl to add <code>__SVR4</code>).
</ul>
<li>updated configure script macros:
CF_ADD_CFLAGS
CF_ADD_INCDIR
CF_ADD_LIBDIR
CF_ADD_SEARCHPATH
CF_FIND_LINKAGE
CF_GCC_ATTRIBUTES
CF_GCC_WARNINGS
CF_HEADER_PATH
CF_LIBRARY_PATH
CF_PATH_PROG
CF_PKG_CONFIG
CF_XOPEN_SOURCE
CF_X_FONTENC
<li>update configure utility scripts (config.guess, config.sub, install-sh, mkdirs.sh).
</ul>
<a id="t20080829">2008/8/29</a> -
<ul>
<li>add <code>-p</code> option, to make the wait-pipe workaround from XFree86
optional.  The default behavior is the older one.
</ul>
<a id="t20080824">2008/8/24</a> -
<ul>
<li>add ifdef for <code>NO_LEAKS</code>, to check for memory leaks.
Found none in luit; font encoding library does have leaks.
</ul>
<a id="t20080823">2008/8/23</a> -
<ul>
<li>update <code>minstall.sh</code> from xterm to fix possible scripting
dependency upon locale.
<li>set ncurses' <code>NCURSES_NO_UTF8_ACS</code> environment variable
to simplify use of line-drawing characters in <code>luit</code>.
<li>improve default value for <code>locale.alias</code> pathname
by checking in the more common X11 locations.
</ul>
<a id="t20080821">2008/8/21</a> -
<ul>
<li>use codepage change from luit 1.0.2
<li>modify configure script so
<code>--with-fontenc-cflags</code> and
<code>--with-fontenc-libs</code> options with when <code>pkg-config</code>
is not available.
<li>fixes for configuring fontenc library without <code>pkg-config</code>.
<li>fixes for gcc <code>-Wwrite-strings</code> warnings.
<li>fixes for gcc <code>-Wconversion</code> warnings.
<li>updated configure script macros
CF_ANSI_CC_REQD,
CF_CHECK_CACHE,
CF_FIND_LIBRARY,
CF_GCC_ATTRIBUTES,
CF_GCC_WARNINGS,
CF_IMAKE_CFLAGS,
CF_MSG_LOG,
CF_PATH_SYNTAX,
CF_POSIX_SAVED_IDS,
CF_SUBDIR_PATH,
CF_TYPE_FD_SET,
CF_VERBOSE,
CF_WITH_PATH,
CF_WITH_ZLIB,
CF_XOPEN_SOURCE.
<li>update configure utility scripts (config.guess, config.sub, install-sh, mkdirs.sh).
</ul>
<a id="t20080820">2006/8/20</a> -
<ul>
<li>import snapshot from XFree86 (last change 2005/2/9).
<li>inspected Xorg sources, found no newer changes of note.
<li>wrote a configure script.
<li>minor code cleanup (fix compiler warnings,
add ifdef's to prevent repeated inclusion of header files
remove redundant #include's
indented code).
</ul>
</BODY>
</HTML>
